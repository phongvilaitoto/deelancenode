(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eb79d15a"],{"0944":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{staticClass:"hidden-sm-and-down",attrs:{cols:"3"}},[r("app-user",{attrs:{fetchOrders:t.fetchOrders,orders:t.orders,auth:t.auth,currentOrder:t.currentOrder}})],1),r("v-col",{attrs:{cols:"12",xs:"12",sm:"12",md:"6",lg:"6"}},["Message"!==t.$route.name?r("v-toolbar",{staticClass:" hidden-md-and-up"},[r("v-toolbar-items",{staticClass:"mx-auto"},[r("v-btn",{staticClass:" hidden-md-and-up",style:t.userMobile?"text-decoration: underline":"",attrs:{text:""},on:{click:t.userMobileFunc}},[t._v("Users ")]),r("v-btn",{staticClass:" hidden-md-and-up",style:t.messageMobile?"text-decoration: underline":"",attrs:{text:""},on:{click:t.messageMobileFunc}},[t._v("Message ")]),r("v-btn",{staticClass:" hidden-md-and-up",style:t.statusMobile?"text-decoration: underline":"",attrs:{text:""},on:{click:t.statusMobileFunc}},[t._v("Status ")])],1)],1):t._e(),r("router-view",{staticClass:"hidden-sm-and-down"}),t.messageMobile?r("router-view",{staticClass:"hidden-md-and-up"}):t._e(),"Message"===t.$route.name||t.userMobile?r("app-user",{staticClass:"hidden-md-and-up",attrs:{fetchOrders:t.fetchOrders,orders:t.orders,auth:t.auth,currentOrder:t.currentOrder,messageMobileFunc:t.messageMobileFunc}}):t._e(),"Message"!==t.$route.name&&t.statusMobile?r("app-status",{staticClass:"hidden-md-and-up",attrs:{currentOrder:t.currentOrder,auth:t.auth}}):t._e()],1),r("v-col",{staticClass:"hidden-sm-and-down",attrs:{cols:"3"}},[r("app-status",{attrs:{currentOrder:t.currentOrder,auth:t.auth}})],1)],1)],1)},s=[],n=(r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b"),r("96cf"),r("89ba")),i=r("2fa7"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container-fixed",style:t.$vuetify.breakpoint.smAndDown?"height: calc(100vh - 110px)":""},[r("v-card",{staticClass:"pa-5",attrs:{outlined:"",tile:"",align:"center"}},[r("v-layout",[r("v-flex",[r("b",[t._v(" ຕັ້ງຄ່າ")])]),r("v-flex",[r("b",{staticStyle:{"text-decoration":"underline"}},[t._v(" ຂໍ້ຄວາມ")])]),r("v-flex",[r("v-menu",{attrs:{bottom:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("b",t._g({staticStyle:{cursor:"pointer"}},a),[t._v(t._s(t.taskAll?"ທັງໝົດ":t.taskWaiting?"ລໍຖ້າຊໍາລະ":t.taskWorking?"ກໍາລັງເຮັດ":t.taskPending?"ລໍອະນຸມັດ":t.taskSuccessful?"ສໍາເລັດ":"ບໍ່ສໍາເລັດ")+" ")])]}}])},[r("v-list",{staticStyle:{cursor:"pointer"}},[r("v-list-item",{on:{click:t.taskAllFunc}},[r("v-list-item-title",[t._v("ທັງໝົດ")])],1),r("v-divider"),r("v-list-item",{on:{click:t.taskWaitingFunc}},[r("v-list-item-title",[t._v("ລໍຖ້າຊໍາລະ")])],1),r("v-divider"),r("v-list-item",{on:{click:t.taskWorkingFunc}},[r("v-list-item-title",[t._v("ກໍາລັງເຮັດ")])],1),r("v-divider"),r("v-list-item",{on:{click:t.taskPendingFunc}},[r("v-list-item-title",[t._v("ລໍອະນຸມັດ")])],1),r("v-divider"),r("v-list-item",{on:{click:t.taskSuccessfulFunc}},[r("v-list-item-title",[t._v("ສໍາເລັດ")])],1)],1)],1)],1)],1)],1),r("div",{staticClass:"card body-fixed"},t._l(t.filterChat,(function(e){return r("v-card",{key:e.index,staticClass:"pt-3 pl-3",attrs:{to:{name:"MessageFocus",params:{id:e._id}},outlined:"",tile:""},on:{click:t.messageMobileFunc}},[t.auth._id===e.employerId._id?r("div",{staticClass:"my-2"},[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs3:"",sm3:"",md3:"",lg3:""}},[r("v-avatar",{attrs:{height:"60",width:"60"}},[r("v-img",{staticClass:"ml-4",attrs:{src:e.freelancerId.image?t.$server+e.freelancerId.image:"https://www.w3schools.com/howto/img_avatar.png"}})],1)],1),r("v-flex",{attrs:{xs9:"",sm9:"",md9:"",lg9:""}},[r("b",[t._v(t._s(e.freelancerId.username))]),r("small",[t._v("#"+t._s(e.quotation.orderId))]),t._v(" "),r("br"),r("small",[t._v("ອ່ານຂໍ້ຄວາມ...")]),r("br"),r("small",[t._v("#"+t._s(e.portfolioId.title))])])],1)],1):t._e(),t.auth._id===e.freelancerId._id?r("div",{staticClass:"my-2"},[r("v-layout",{attrs:{row:""}},[r("v-flex",{attrs:{xs3:"",sm3:"",md3:"",lg3:""}},[r("v-avatar",{attrs:{height:"60",width:"60"}},[r("v-img",{staticClass:"ml-4",attrs:{src:e.employerId.image?t.$server+e.employerId.image:"https://www.w3schools.com/howto/img_avatar.png"}})],1)],1),r("v-flex",{attrs:{xs9:"",sm9:"",md9:"",lg9:""}},[r("b",[t._v(t._s(e.employerId.username))]),t._v(" "),r("small",[t._v("#"+t._s(e.quotation.orderId))]),t._v(" "),r("br"),r("small",[t._v("ອ່ານຂໍ້ຄວາມ...")]),r("br"),r("small",[t._v("#"+t._s(e.portfolioId.title))])])],1)],1):t._e()])})),1)],1)},c=[],l={props:["orders","auth","currentOrder","fetchOrders","messageMobileFunc"],data:function(){return{taskAll:!0,taskWaiting:!1,taskWorking:!1,taskPending:!1,taskSuccessful:!1,paymentStatus:null,complete:!1}},computed:{filterChat:function(){var t=this;return this.orders.filter((function(e){return t.taskAll?e:t.taskWaiting?"wait for payment"===e.quotation.workStatus:t.taskWorking?"in progress"===e.quotation.workStatus:t.taskPending?"pending"===e.quotation.workStatus:t.taskSuccessful?"successful"===e.quotation.workStatus:void 0}))}},methods:{taskAllFunc:function(){this.taskAll=!0,this.taskWaiting=!1,this.taskWorking=!1,this.taskSuccessful=!1},taskWaitingFunc:function(){this.taskWaiting=!0,this.taskAll=!1,this.taskWorking=!1,this.taskSuccessful=!1},taskWorkingFunc:function(){this.taskWorking=!0,this.taskAll=!1,this.taskWaiting=!1,this.taskSuccessful=!1},taskPendingFunc:function(){this.taskPending=!0,this.taskAll=!1,this.taskWaiting=!1,this.taskWorking=!1,this.taskSuccessful=!1},taskSuccessfulFunc:function(){this.taskSuccessful=!0,this.taskAll=!1,this.taskWaiting=!1,this.taskWorking=!1,this.taskPending=!1}}},u=l,d=(r("9ca0"),r("2877")),v=r("6544"),p=r.n(v),h=r("8212"),f=r("b0af"),m=r("ce7e"),g=r("0e8f"),b=r("adda"),y=r("a722"),O=r("8860"),_=r("da13"),w=r("5d23"),x=r("e449"),k=Object(d["a"])(u,o,c,!1,null,"6de40d36",null),C=k.exports;p()(k,{VAvatar:h["a"],VCard:f["a"],VDivider:m["a"],VFlex:g["a"],VImg:b["a"],VLayout:y["a"],VList:O["a"],VListItem:_["a"],VListItemTitle:w["b"],VMenu:x["a"]});var I=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",["MessageFocus"===t.$route.name?r("div",{staticClass:"container-fixed",style:t.$vuetify.breakpoint.smAndDown?"height: calc(100vh - 110px)":""},[r("v-card",{staticClass:"pa-5",attrs:{outlined:"",tile:"",align:"center"}},[r("b",[t._v("ສະຖານະ")])]),r("app-employer-status",{staticClass:"body-fixed",attrs:{auth:t.auth,currentOrder:t.currentOrder}}),r("app-freelancer-status",{staticClass:"body-fixed",attrs:{auth:t.auth,currentOrder:t.currentOrder}}),t.$route.params.id?r("v-card",{staticClass:"pa-3",attrs:{outlined:"",tile:""}},[r("v-layout",[r("v-flex",{attrs:{xs10:"",sm10:"",md10:"",lg10:""}},[r("v-avatar",[r("v-img",{attrs:{src:t.currentOrder.freelancerId.image?t.$server+t.currentOrder.freelancerId.image:"https://www.w3schools.com/howto/img_avatar.png"}})],1)],1),r("v-flex",[r("v-btn",{staticClass:"primary--text",attrs:{large:"",outlined:""}},[t._v("ໂປຣຟຣາຍ")])],1)],1)],1):t._e()],1):r("div",[r("v-card",{staticClass:"pa-5",attrs:{outlined:"",tile:"",align:"center"}},[r("b",[t._v("ສະຖານະ")])])],1)])},S=[],j=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.auth._id===t.currentOrder.employerId._id?r("v-card",{staticClass:"card pa-2",attrs:{outlined:"",tile:""}},[t.currentOrder.quotation.createdAt?r("div",[r("v-layout",{staticClass:"mb-5"},[r("v-flex",[r("v-img",{attrs:{height:"70",width:"70",src:t.$server+t.currentOrder.portfolioId.images[0]}})],1),r("v-flex",[r("small",[t._v(t._s(t.currentOrder.portfolioId.title))])])],1),r("span",[t._v("OrderID: "+t._s(t.currentOrder.quotation.orderId))]),"successful"!==t.currentOrder.quotation.workStatus?r("div",[r("v-divider",{staticClass:"my-2"}),r("span",[t._v("ລາຄາ: "+t._s(Number(t.currentOrder.quotation.price.toFixed(1)).toLocaleString())+" ກີບ")]),r("v-divider",{staticClass:"my-2"}),r("span",[t._v("ການຊໍາລະເງິນ: "),r("span",{class:!0===t.currentOrder.quotation.paymentStatus?"success--text":"error--text"},[t._v(" "+t._s(!0===t.currentOrder.quotation.paymentStatus?"ຊໍາລະເງິນແລ້ວ":"ບໍ່ທັນຊໍາລະເງິນ"))])]),r("v-divider",{staticClass:"my-2"}),r("span",[t._v("ເວລາໃນການເຮັດວຽກ: "+t._s(t.currentOrder.quotation.dayWork)+" ມື້")])],1):t._e(),r("v-divider",{staticClass:"my-2"}),"wait for payment"===t.currentOrder.quotation.workStatus?r("div",[r("v-btn",{staticClass:"primary mt-3 mb-2",attrs:{to:{name:"Payment",params:{id:t.currentOrder.quotation.orderId}},block:""}},[t._v("ຊໍາລະເງິນ")]),r("small",[t._v("*ເມື່ອຊໍາລະເງິນໃຫ້ລະບົບແລ້ວ Freelance ຈະເລີ່ມເຮັດວຽກທັນທີ")])],1):t._e(),"in progress"===t.currentOrder.quotation.workStatus?r("div",[r("span",[t._v(" ເລີ່ມເຮັດວຽກວັນທີ:"+t._s(t.$moment(t.currentOrder.quotation.createdAt).format("DD/MM/YY")))]),r("v-divider",{staticClass:"my-2"}),r("span",[t._v("ສົ່ງມອບວຽກ: "+t._s(t.$moment((new Date).setDate((new Date).getDate()+t.currentOrder.quotation.dayWork)).format("DD/MM/YY"))+" ")]),r("v-spacer"),r("small",{staticClass:"primary--text"},[t._v("*ລໍຖ້າ Freelance ສົ່ງມອບງານແລ້ວສາມາກດກວດສອບ ວ່າຕ້ອງການໃຫ້ Freelance ແກ້ໄຂງານໃຫ້ຫຼືບໍ່, ແລ້ວກົດປຸ່ມອະນຸມັດເພື່ອສໍາເລັດການເຮັດວຽກ")])],1):t._e(),"pending"===t.currentOrder.quotation.workStatus?r("div",[r("div",[r("span",[t._v(" ເລີ່ມເຮັດວຽກວັນທີ: "+t._s(t.$moment(t.currentOrder.quotation.createdAt).format("DD/MM/YY"))+" ")]),r("v-divider",{staticClass:"my-2"}),r("span",[t._v("ສົ່ງມອບວຽກ: "+t._s(t.$moment((new Date).setDate((new Date).getDate()+t.currentOrder.quotation.dayWork)).format("DD/MM/YY"))+" ")]),r("v-divider",{staticClass:"my-2"})],1),r("v-layout",{attrs:{"justify-center":""}},[r("v-flex",{staticClass:"mr-1",attrs:{xs5:"",sm5:""}},[r("v-btn",{staticClass:"success",attrs:{block:""},on:{click:t.orderApprove}},[t._v("ອະນຸມັດງານ")])],1),r("v-flex",{staticClass:"ml-1",attrs:{xs5:"",sm5:""}},[r("v-btn",{staticClass:"warning",attrs:{block:""}},[t._v("ຂໍແກ້ໄຂງານ")])],1)],1)],1):t._e(),"successful"===t.currentOrder.quotation.workStatus?r("div",{staticClass:"text-center"},[r("v-img",{staticClass:"mx-auto",attrs:{width:"100",src:"https://openjournalsystems.com/wp-content/uploads/2017/07/payment-success.png"}}),r("span",[t._v("ງານສໍາເລັດ 100%")]),r("v-spacer"),r("small",[t._v("*ລະບົບຈະໂອນເງິນໃຫ້ກັບ Freelance")])],1):t._e(),r("div",{staticClass:"text-center"},["successful"!==t.currentOrder.quotation.workStatus||t.currentOrder.reviewId?t._e():r("div",[r("app-create-review-modal",{attrs:{currentOrder:t.currentOrder,auth:t.auth}}),r("small",[t._v("*Review ຜົນງານຂອງ Freelance")])],1),t.currentOrder.reviewId?r("div",[r("v-rating",{attrs:{"half-increments":"",readonly:"",color:"yellow darken-3","background-color":"grey darken-1",hover:"",size:"30"},model:{value:t.currentOrder.reviewId.rating,callback:function(e){t.$set(t.currentOrder.reviewId,"rating",e)},expression:"currentOrder.reviewId.rating"}}),r("p",{staticClass:"grey--text"},[t._v(t._s(t.currentOrder.reviewId.text))])],1):t._e(),"successful"===t.currentOrder.quotation.workStatus&&t.currentOrder.reviewId?r("div",[r("app-update-review-modal",{attrs:{currentOrder:t.currentOrder}})],1):t._e()])],1):r("div",[r("b",[t._v(" ສອບຖາມ ແລະ ຕົກລົງລາຍລະອຽດການເຮັດວຽກ")]),r("br"),t._v(" ຂັ້ນຕອນການໃຊ້ງານ: "),r("br"),t._v(" 1) ຂໍໃບສະເໜີລາຄາຈາກ Freelance "),r("br"),t._v(" 2) ຊໍາລະເງິນຜ່ານ Deelance "),r("br"),t._v(" 3) Freelance ເລີ່ມເຮັດວຽກ "),r("br"),t._v(" 4) ແກ້ໄຂ / ອະນຸມັດງານຂອງ Freelance "),r("br"),t._v(" 5) ລະບົບໂອນເງິນໃຫ້ Freelance ຫຼັງຈາກອະນຸມັດງານ "),r("br"),r("v-divider",{staticClass:"my-3"}),r("span",[t._v(" ເລີ່ມຕົ້ນແຊັດເມື່ອ: "+t._s(t.$moment(t.currentOrder.createdAt).format("DD/MM/YY"))+" ")])],1)]):t._e()},V=[],$=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-row",{attrs:{justify:"center"}},[r("v-btn",{class:"success",attrs:{dark:"",block:""},on:{click:function(e){e.stopPropagation(),t.dialog=!0}}},[t._v(" Review ")]),r("v-dialog",{attrs:{"max-width":"290"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",[r("v-card-title",{staticClass:"headline justify-center"},[t._v(" ໃຫ້ຄະແນນ "+t._s(t.rating)+" ")]),r("v-card-text",[r("v-form",{on:{submit:function(e){return e.preventDefault(),t.createReview(e)}}},[r("v-text-field",{attrs:{label:"ຄວາມຄິດເຫັນ"},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),r("div",{staticClass:"text-center"},[r("v-rating",{attrs:{"half-increments":"",color:"yellow darken-3","background-color":"grey darken-1",hover:"",size:"32"},model:{value:t.rating,callback:function(e){t.rating=e},expression:"rating"}})],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"error darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" ຍົກເລີກ ")]),r("v-btn",{attrs:{type:"submit",color:"success",text:""},on:{click:t.createReview}},[t._v(" ຕົກລົງ ")])],1)],1)],1)],1)},q=[],D=r("2f62");function M(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function F(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?M(r,!0).forEach((function(e){Object(i["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var P={props:["currentOrder","auth"],data:function(){return{dialog:!1,text:"",rating:null}},methods:F({},Object(D["b"])(["fetchCurrentOrder"]),{createReview:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.post("review/post",{text:this.text,rating:this.rating,portfolioId:this.currentOrder.portfolioId._id,orderId:this.currentOrder._id,userId:this.auth._id});case 2:return t.next=4,this.fetchCurrentOrder(this.currentOrder._id);case 4:this.$io.emit("review"),this.dialog=!1;case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()})},R=P,H=r("8336"),W=r("99d9"),A=r("169a"),E=r("4bd4"),B=r("1d4d"),N=r("0fd9"),Y=r("2fa4"),T=r("8654"),L=Object(d["a"])(R,$,q,!1,null,null,null),z=L.exports;p()(L,{VBtn:H["a"],VCard:f["a"],VCardActions:W["a"],VCardText:W["b"],VCardTitle:W["c"],VDialog:A["a"],VForm:E["a"],VRating:B["a"],VRow:N["a"],VSpacer:Y["a"],VTextField:T["a"]});var G=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-row",{attrs:{justify:"center"}},[r("v-btn",{class:"warning",attrs:{dark:"",block:""},on:{click:function(e){e.stopPropagation(),t.dialog=!0}}},[t._v(" ແກ້ໄຂ Review ")]),r("v-dialog",{attrs:{"max-width":"290"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",[r("v-card-title",{staticClass:"headline justify-center"},[t._v(" ໃຫ້ຄະແນນ "+t._s(t.rating)+" ")]),r("v-card-text",[r("v-form",{on:{submit:function(e){return e.preventDefault(),t.updateReview(e)}}},[r("v-text-field",{attrs:{label:"ຄວາມຄິດເຫັນ"},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),r("div",{staticClass:"text-center"},[r("v-rating",{attrs:{"half-increments":"",color:"yellow darken-3","background-color":"grey darken-1",hover:"",size:"32"},model:{value:t.rating,callback:function(e){t.rating=e},expression:"rating"}})],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"error darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" ຍົກເລີກ ")]),r("v-btn",{attrs:{type:"submit",color:"success",text:""},on:{click:t.updateReview}},[t._v(" ຕົກລົງ ")])],1)],1)],1)],1)},U=[];function J(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Q(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?J(r,!0).forEach((function(e){Object(i["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):J(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var K={props:["currentOrder"],data:function(){return{dialog:!1,text:"",rating:null}},methods:Q({},Object(D["b"])(["fetchCurrentOrder"]),{updateReview:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.put("review/update-review",{reviewId:this.currentOrder.reviewId._id,text:this.text,rating:this.rating});case 2:return t.next=4,this.fetchCurrentOrder(this.currentOrder._id);case 4:this.$io.emit("review"),this.dialog=!1;case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()})},X=K,Z=Object(d["a"])(X,G,U,!1,null,null,null),tt=Z.exports;p()(Z,{VBtn:H["a"],VCard:f["a"],VCardActions:W["a"],VCardText:W["b"],VCardTitle:W["c"],VDialog:A["a"],VForm:E["a"],VRating:B["a"],VRow:N["a"],VSpacer:Y["a"],VTextField:T["a"]});var et={components:{appCreateReviewModal:z,appUpdateReviewModal:tt},props:["auth","currentOrder"],methods:{orderApprove:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.put("order/order-approve",{_id:this.currentOrder._id});case 2:this.$io.emit("update-quotation");case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},rt=et,at=Object(d["a"])(rt,j,V,!1,null,null,null),st=at.exports;p()(at,{VBtn:H["a"],VCard:f["a"],VDivider:m["a"],VFlex:g["a"],VImg:b["a"],VLayout:y["a"],VRating:B["a"],VSpacer:Y["a"]});var nt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.auth._id===t.currentOrder.freelancerId._id?r("v-card",{staticClass:"card pa-2",attrs:{outlined:"",tile:""}},[t.currentOrder.quotation.createdAt?r("div",[r("v-layout",{staticClass:"mb-5"},[r("v-flex",[r("v-img",{attrs:{height:"70",width:"70",src:t.$server+t.currentOrder.portfolioId.images[0]}})],1),r("v-flex",[r("small",[t._v(t._s(t.currentOrder.portfolioId.title))])])],1),r("span",[t._v("OrderID: "+t._s(t.currentOrder.quotation.orderId))]),"successful"!==t.currentOrder.quotation.workStatus?r("div",[r("v-divider",{staticClass:"my-2"}),r("span",[t._v("ລາຄາ: "+t._s(t.currentOrder.quotation.price.toLocaleString())+" ກີບ")]),r("v-divider",{staticClass:"my-2"}),r("span",[t._v("ການຊໍາລະເງິນ: "),r("span",{class:!0===t.currentOrder.quotation.paymentStatus?"success--text":"error--text"},[t._v(" "+t._s(!0===t.currentOrder.quotation.paymentStatus?"ຊໍາລະເງິນແລ້ວ":"ບໍ່ທັນຊໍາລະເງິນ")+" ")])]),r("v-divider",{staticClass:"my-2"}),r("span",[t._v("ເວລາໃນການເຮັດວຽກ: "+t._s(t.currentOrder.quotation.dayWork)+" ມື້")])],1):t._e(),r("v-divider",{staticClass:"my-2"}),"wait for payment"===t.currentOrder.quotation.workStatus?r("div",[r("v-spacer",{staticClass:"mb-3"}),r("small",{staticClass:"primary--text"},[t._v("*ລໍຖ້າຜູ້ວ່າຈ້າງຊໍາລະເງິນໃຫ້ລະບົບສໍາເລັດ ແລ້ວເລີ່ມເຮັດວຽກໄດ້ທັນທີ")])],1):t._e(),"in progress"===t.currentOrder.quotation.workStatus?r("div",[r("span",[t._v(" ເລີ່ມເຮັດວຽກວັນທີ: "+t._s(t.$moment(t.currentOrder.quotation.createdAt).format("DD/MM/YY"))+" ")]),r("v-divider",{staticClass:"my-2"}),r("span",[t._v("ສົ່ງມອບວຽກ: "+t._s(t.$moment((new Date).setDate((new Date).getDate()+t.currentOrder.quotation.dayWork)).format("DD/MM/YY"))+" ")]),r("v-btn",{staticClass:"primary mt-2",attrs:{block:""},on:{click:t.orderPending}},[t._v("ສົ່ງມອບວຽກ")])],1):t._e(),"pending"===t.currentOrder.quotation.workStatus?r("div",[r("span",[t._v(" ເລີ່ມເຮັດວຽກວັນທີ: "+t._s(t.$moment(t.currentOrder.quotation.createdAt).format("DD/MM/YY"))+" ")]),r("v-divider",{staticClass:"my-2"}),r("span",[t._v("ສົ່ງມອບວຽກ: "+t._s(t.$moment((new Date).setDate((new Date).getDate()+t.currentOrder.quotation.dayWork)).format("DD/MM/YY"))+" ")]),r("v-spacer"),r("small",{staticClass:"primary--text"},[t._v("*ລໍຖ້າຜູ້ວ່າຈ້າງອະນຸມັດ")])],1):t._e(),"successful"===t.currentOrder.quotation.workStatus?r("div",{staticClass:"text-center"},[r("v-img",{staticClass:"mx-auto",attrs:{width:"100",src:"https://openjournalsystems.com/wp-content/uploads/2017/07/payment-success.png"}}),r("span",[t._v("ງານສໍາເລັດ 100%")]),r("v-spacer"),r("small",[t._v("*ລໍຖ້າລະບົບໂອນເງິນໃຫ້")])],1):t._e(),r("div",{staticClass:"text-center"},["successful"!==t.currentOrder.quotation.workStatus||t.currentOrder.reviewId?t._e():r("div",[r("v-divider"),r("small",{staticClass:"warning--text"},[t._v("*ຜູ້ວ່າຈ້າງຍັງບໍ່ທັນ Review ຜົນງານ")])],1),t.currentOrder.reviewId?r("div",[r("v-rating",{attrs:{"half-increments":"",readonly:"",color:"yellow darken-3","background-color":"grey darken-1",hover:"",size:"30"},model:{value:t.currentOrder.reviewId.rating,callback:function(e){t.$set(t.currentOrder.reviewId,"rating",e)},expression:"currentOrder.reviewId.rating"}}),r("p",{staticClass:"grey--text"},[t._v(t._s(t.currentOrder.reviewId.text))])],1):t._e()])],1):r("div",[r("b",[t._v(" ສອບຖາມ ແລະ ຕົກລົງລາຍລະອຽດການເຮັດວຽກ")]),r("br"),t._v(" ຂັ້ນຕອນການໃຊ້ງານ: "),r("br"),t._v(" 1) ສ້າງໃບສະເໜີລາຄາ "),r("br"),t._v(" 2) ລໍຖ້າຜູ້ວ່າຈ້າງຊໍາລະເງິນຜ່ານ Deelance "),r("br"),t._v(" 3) ເລີ່ມເຮັດວຽກຫຼັງຈາກຜູ້ວ່າຈ້າງຊໍາລະເງິນສໍາເລັດ "),r("br"),t._v(" 4) ສົ່ງງານໃຫ້ຜູ້ວ່າຈ້າງກວດສອບ ແລະ ແກ້ໄຂ "),r("br"),t._v(" 5) ລະບົບໂອນເງິນໃຫ້ Freelance ຫຼັງຈາກອະນຸມັດງານ "),r("br"),"MessageFocus"===t.$route.name?r("div",{staticClass:"mt-2 mb-3"},[t.currentOrder.quotation.createdAt?t._e():r("app-order-modal",{attrs:{auth:t.auth,currentOrder:t.currentOrder}})],1):t._e(),r("span",[t._v("ເລີ່ມຕົ້ນແຊັດເມື່ອ: 12/11/19")])])]):t._e()},it=[],ot=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-row",{attrs:{justify:"center"}},[r("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({staticClass:"primary",attrs:{block:""}},a),[t._v("ສ້າງໃບສະເໜີລາຄາ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",[r("v-form",{on:{submit:function(e){return e.preventDefault(),t.updateQuotation(e)}}},[r("v-card-title",[r("span",{staticClass:"headline"},[t._v("ສ້າງໃບສະເໜີລາຄາ")])]),r("v-card-text",[r("v-container",[r("v-text-field",{attrs:{label:"ລາຄາ*",type:"number",outlined:"",required:""},model:{value:t.quotation.price,callback:function(e){t.$set(t.quotation,"price",e)},expression:"quotation.price"}}),r("v-textarea",{attrs:{outlined:"",label:"ລາຍລະອຽດ*",type:"text",required:""},model:{value:t.quotation.information,callback:function(e){t.$set(t.quotation,"information",e)},expression:"quotation.information"}}),r("v-text-field",{attrs:{outlined:"",label:"ເວລາໃນການເຮັດວຽກ*",type:"number",required:""},model:{value:t.quotation.dayWork,callback:function(e){t.$set(t.quotation,"dayWork",e)},expression:"quotation.dayWork"}}),r("v-text-field",{attrs:{outlined:"",label:"ສິ່ງທີ່ລູກຄ້າຈະໄດ້ຮັບ*",type:"text",required:""},model:{value:t.quotation.receive,callback:function(e){t.$set(t.quotation,"receive",e)},expression:"quotation.receive"}}),r("v-textarea",{attrs:{outlined:"",label:"ໝາຍເຫດ*",type:"text",required:""},model:{value:t.quotation.optional,callback:function(e){t.$set(t.quotation,"optional",e)},expression:"quotation.optional"}})],1),r("small",[t._v("*ກະລຸນາປ້ອນຂໍ້ມູນໃຫ້ຄົບຖ້ວນ")])],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("ປິດ")]),r("v-btn",{attrs:{type:"submit",color:"primary"},on:{click:function(e){t.dialog=!1}}},[t._v("ສ້າງໃບສະເໜີລາຄາ")])],1)],1)],1)],1)],1)},ct=[];function lt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function ut(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?lt(r,!0).forEach((function(e){Object(i["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lt(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var dt={props:["auth","currentOrder"],data:function(){return{dialog:!1,quotation:{information:"",price:"",dayWork:"",receive:"",optional:""}}},methods:ut({},Object(D["b"])(["fetchCurrentOrder"]),{updateQuotation:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,r,a,s,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e=this.quotation,r=e.information,a=e.price,s=e.dayWork,n=e.receive,i=e.optional,t.next=4,this.$axios.put("order/update-quotation",{_id:this.currentOrder._id,information:r,price:a,dayWork:s,receive:n,optional:i,message:"ໃບສະເໜີລາຄາ",type:"quotation",from:this.currentOrder.freelancerId._id,to:this.currentOrder.employerId._id,orderId:this.currentOrder._id});case 4:return t.next=6,this.fetchCurrentOrder(this.currentOrder._id);case 6:this.$io.emit("update-quotation"),this.$io.emit("update-message"),this.$swal({title:"ສ້າງໃບສະເໜີລາຄາສໍາເລັດ",type:"success"}),t.next=14;break;case 11:throw t.prev=11,t.t0=t["catch"](0),new Error(t.t0);case 14:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(){return t.apply(this,arguments)}return e}()})},vt=dt,pt=r("a523"),ht=r("a844"),ft=Object(d["a"])(vt,ot,ct,!1,null,null,null),mt=ft.exports;p()(ft,{VBtn:H["a"],VCard:f["a"],VCardActions:W["a"],VCardText:W["b"],VCardTitle:W["c"],VContainer:pt["a"],VDialog:A["a"],VForm:E["a"],VRow:N["a"],VSpacer:Y["a"],VTextField:T["a"],VTextarea:ht["a"]});var gt={components:{appOrderModal:mt},props:["auth","currentOrder"],methods:{orderPending:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.put("order/order-pending",{_id:this.currentOrder._id});case 2:this.$io.emit("update-quotation");case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},bt=gt,yt=Object(d["a"])(bt,nt,it,!1,null,"46c9c4bf",null),Ot=yt.exports;p()(yt,{VBtn:H["a"],VCard:f["a"],VDivider:m["a"],VFlex:g["a"],VImg:b["a"],VLayout:y["a"],VRating:B["a"],VSpacer:Y["a"]});var _t={components:{appEmployerStatus:st,appFreelancerStatus:Ot},data:function(){return{}},props:["currentOrder","auth"],methods:{}},wt=_t,xt=(r("7fbb"),Object(d["a"])(wt,I,S,!1,null,"7fc1b8e3",null)),kt=xt.exports;function Ct(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function It(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ct(r,!0).forEach((function(e){Object(i["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ct(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}p()(xt,{VAvatar:h["a"],VBtn:H["a"],VCard:f["a"],VFlex:g["a"],VImg:b["a"],VLayout:y["a"]});var St={components:{appUser:C,appStatus:kt},data:function(){return{orders:[],userMobile:!1,messageMobile:!0,statusMobile:!1}},computed:It({},Object(D["c"])(["auth","currentOrder"])),methods:It({},Object(D["b"])(["fetchCurrentOrder"]),{fetchOrders:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$axios.get("order/orders",{params:{authId:this.auth._id}});case 2:e=t.sent,this.orders=e.data.orders;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),userMobileFunc:function(){this.userMobile=!0,this.messageMobile=!1,this.statusMobile=!1},messageMobileFunc:function(){this.messageMobile=!0,this.userMobile=!1,this.statusMobile=!1},statusMobileFunc:function(){this.statusMobile=!0,this.userMobile=!1,this.messageMobile=!1}}),created:function(){this.fetchOrders(),this.fetchCurrentOrder(this.$route.params.id)},mounted:function(){var t=this;this.$io.on("update-quotation",(function(){return t.fetchCurrentOrder(t.$route.params.id)})),this.$io.on("create-order",(function(){return t.fetchOrders()})),this.$io.on("review",(function(){return t.fetchCurrentOrder(t.$route.params.id)}))}},jt=St,Vt=r("62ad"),$t=r("71d9"),qt=r("2a7f"),Dt=Object(d["a"])(jt,a,s,!1,null,"ac2b8172",null);e["default"]=Dt.exports;p()(Dt,{VBtn:H["a"],VCol:Vt["a"],VRow:N["a"],VToolbar:$t["a"],VToolbarItems:qt["a"]})},1681:function(t,e,r){},"1d4d":function(t,e,r){"use strict";r("696f");var a=r("9d26"),s=r("a9ad"),n=r("16b7"),i=r("af2b"),o=r("5607"),c=r("2b0e"),l=c["a"].extend({name:"rippleable",directives:{ripple:o["a"]},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple(t={}){return this.ripple?(t.staticClass="v-input--selection-controls__ripple",t.directives=t.directives||[],t.directives.push({name:"ripple",value:{center:!0}}),t.on=Object.assign({click:this.onChange},this.$listeners),this.$createElement("div",t)):null},onChange(){}}}),u=r("7560"),d=r("80d2"),v=r("58df");e["a"]=Object(v["a"])(s["a"],n["a"],l,i["a"],u["a"]).extend({name:"v-rating",props:{backgroundColor:{type:String,default:"accent"},color:{type:String,default:"primary"},clearable:Boolean,dense:Boolean,emptyIcon:{type:String,default:"$ratingEmpty"},fullIcon:{type:String,default:"$ratingFull"},halfIcon:{type:String,default:"$ratingHalf"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,size:[Number,String],value:{type:Number,default:0}},data(){return{hoverIndex:-1,internalValue:this.value}},computed:{directives(){return this.readonly||!this.ripple?[]:[{name:"ripple",value:{circle:!0}}]},iconProps(){const{dark:t,large:e,light:r,medium:a,small:s,size:n,xLarge:i,xSmall:o}=this.$props;return{dark:t,large:e,light:r,medium:a,size:n,small:s,xLarge:i,xSmall:o}},isHovering(){return this.hover&&this.hoverIndex>=0}},watch:{internalValue(t){t!==this.value&&this.$emit("input",t)},value(t){this.internalValue=t}},methods:{createClickFn(t){return e=>{if(this.readonly)return;const r=this.genHoverIndex(e,t);this.clearable&&this.internalValue===r?this.internalValue=0:this.internalValue=r}},createProps(t){const e={index:t,value:this.internalValue,click:this.createClickFn(t),isFilled:Math.floor(this.internalValue)>t,isHovered:Math.floor(this.hoverIndex)>t};return this.halfIncrements&&(e.isHalfHovered=!e.isHovered&&(this.hoverIndex-t)%1>0,e.isHalfFilled=!e.isFilled&&(this.internalValue-t)%1>0),e},genHoverIndex(t,e){let r=this.isHalfEvent(t);return this.$vuetify.rtl&&(r=!r),e+(r?.5:1)},getIconName(t){const e=this.isHovering?t.isHovered:t.isFilled,r=this.isHovering?t.isHalfHovered:t.isHalfFilled;return e?this.fullIcon:r?this.halfIcon:this.emptyIcon},getColor(t){if(this.isHovering){if(t.isHovered||t.isHalfHovered)return this.color}else if(t.isFilled||t.isHalfFilled)return this.color;return this.backgroundColor},isHalfEvent(t){if(this.halfIncrements){const e=t.target&&t.target.getBoundingClientRect();if(e&&t.pageX-e.left<e.width/2)return!0}return!1},onMouseEnter(t,e){this.runDelay("open",()=>{this.hoverIndex=this.genHoverIndex(t,e)})},onMouseLeave(){this.runDelay("close",()=>this.hoverIndex=-1)},genItem(t){const e=this.createProps(t);if(this.$scopedSlots.item)return this.$scopedSlots.item(e);const r={click:e.click};return this.hover&&(r.mouseenter=e=>this.onMouseEnter(e,t),r.mouseleave=this.onMouseLeave,this.halfIncrements&&(r.mousemove=e=>this.onMouseEnter(e,t))),this.$createElement(a["a"],this.setTextColor(this.getColor(e),{directives:this.directives,props:this.iconProps,on:r}),[this.getIconName(e)])}},render(t){const e=Object(d["h"])(Number(this.length)).map(t=>this.genItem(t));return t("div",{staticClass:"v-rating",class:{"v-rating--readonly":this.readonly,"v-rating--dense":this.dense}},e)}})},"30c7":function(t,e,r){},"62ad":function(t,e,r){"use strict";r("4b85");var a=r("2b0e"),s=r("d9f7"),n=r("80d2");const i=["sm","md","lg","xl"],o=(()=>{return i.reduce((t,e)=>{return t[e]={type:[Boolean,String,Number],default:!1},t},{})})(),c=(()=>{return i.reduce((t,e)=>{return t["offset"+Object(n["x"])(e)]={type:[String,Number],default:null},t},{})})(),l=(()=>{return i.reduce((t,e)=>{return t["order"+Object(n["x"])(e)]={type:[String,Number],default:null},t},{})})(),u={col:Object.keys(o),offset:Object.keys(c),order:Object.keys(l)};function d(t,e,r){let a=t;if(null!=r&&!1!==r){if(e){const r=e.replace(t,"");a+=`-${r}`}return"col"!==t||""!==r&&!0!==r?(a+=`-${r}`,a.toLowerCase()):a.toLowerCase()}}const v=new Map;e["a"]=a["a"].extend({name:"v-col",functional:!0,props:{cols:{type:[Boolean,String,Number],default:!1},...o,offset:{type:[String,Number],default:null},...c,order:{type:[String,Number],default:null},...l,alignSelf:{type:String,default:null,validator:t=>["auto","start","end","center","baseline","stretch"].includes(t)},justifySelf:{type:String,default:null,validator:t=>["auto","start","end","center","baseline","stretch"].includes(t)},tag:{type:String,default:"div"}},render(t,{props:e,data:r,children:a,parent:n}){let i="";for(const s in e)i+=String(e[s]);let o=v.get(i);if(!o){let t;for(t in o=[],u)u[t].forEach(r=>{const a=e[r],s=d(t,r,a);s&&o.push(s)});const r=o.some(t=>t.startsWith("col-"));o.push({col:!r||!e.cols,[`col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf,[`justify-self-${e.justifySelf}`]:e.justifySelf}),v.set(i,o)}return t(e.tag,Object(s["a"])(r,{class:o}),a)}})},"696f":function(t,e,r){},"7fbb":function(t,e,r){"use strict";var a=r("30c7"),s=r.n(a);s.a},"9ca0":function(t,e,r){"use strict";var a=r("b037"),s=r.n(a);s.a},a523:function(t,e,r){"use strict";r("20f6"),r("4b85");var a=r("e8f2"),s=r("d9f7");e["a"]=Object(a["a"])("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render(t,{props:e,data:r,children:a}){let n;const{attrs:i}=r;return i&&(r.attrs={},n=Object.keys(i).filter(t=>{if("slot"===t)return!1;const e=i[t];return t.startsWith("data-")?(r.attrs[t]=e,!1):e||"string"===typeof e})),e.id&&(r.domProps=r.domProps||{},r.domProps.id=e.id),t(e.tag,Object(s["a"])(r,{staticClass:"container",class:Array({"container--fluid":e.fluid}).concat(n||[])}),a)}})},a844:function(t,e,r){"use strict";r("1681");var a=r("8654"),s=r("58df");const n=Object(s["a"])(a["a"]);e["a"]=n.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:t=>!isNaN(parseFloat(t))},rows:{type:[Number,String],default:5,validator:t=>!isNaN(parseInt(t,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...a["a"].options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout(()=>{this.autoGrow&&this.calculateInputHeight()},0)},methods:{calculateInputHeight(){const t=this.$refs.input;if(!t)return;t.style.height="0";const e=t.scrollHeight,r=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(r,e)+"px"},genInput(){const t=a["a"].options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput(t){a["a"].options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}})},b037:function(t,e,r){}}]);
//# sourceMappingURL=chunk-eb79d15a.246072c4.js.map